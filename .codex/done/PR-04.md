---
id: PR-04
track: providers
depends_on: [PR-03]
---
# PR-04: Add RenderPlan and ProviderPayload shared types (providers-side view)

## Goal
Prepare providers to implement the `encode(RenderPlan) -> ProviderPayload` export that the host will call in planned mode.

## Changes
- Add shared types crate/module (can be the same as PR-02 crate or a sibling):
  - `RenderTier` + `RenderPlan` (match host)
  - `RenderWarning`
  - `ProviderPayload { content_type, body, metadata }`
  - `EncodeResult { payload, warnings }`
- Add serde round-trip tests

## Acceptance criteria
- Shared types are used across providers
- JSON snapshot tests pass (stable shapes)
- CI stays green

## Notes
- Keep types aligned with `greentic-messaging` to avoid runtime mismatch.

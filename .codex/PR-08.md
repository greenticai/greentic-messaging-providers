---
id: PR-08
track: providers
depends_on: [PR-07]
---
# PR-08: gtpack metadata completeness + capability caching + digest pinning hooks

## Goal
Make store distribution robust and operationally predictable:
- packs include the metadata needed for secrets bootstrap
- capabilities can be cached in the pack (optional) without being authoritative
- artifacts can be pinned by digest

## Changes
- Ensure pack generation includes:
  - `secret_requirements` aggregation (already partly presentâ€”verify completeness)
  - optional `capabilities_v1.json` artifact per provider component (cache)
  - pack manifest references for the cache (non-authoritative)
- Add tooling hook (even if just documented) for digest pinning:
  - output digests at build time into `packs.lock.json`
- Add tests:
  - pack manifest contains `secret_requirements`
  - capabilities cache included when enabled
  - lock file format stable

## Acceptance criteria
- `gtpack` build produces deterministic artifacts
- Pack manifests validate
- CI stays green

## Notes
- The host should still call `capabilities()` at runtime; cache is for UX/preview and offline inspection.

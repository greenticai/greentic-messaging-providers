id: setup_custom
type: job
in: setup_custom__collect
parameters: {}
tags: []
schema_version: 2
entrypoints: {}
nodes:
  setup_custom__collect:
    routing:
    - to: setup_custom__validate
    text:
      text: 'Collect inputs for setup_custom.

        Required config keys: ["public_base_url"]

        Optional config keys: ["default_channel", "team_id"]

        Required secrets: ["SLACK_BOT_TOKEN"]

        Optional secrets: ["SLACK_SIGNING_SECRET"]

        Uses Slack Events API for inbound webhooks.

        '
  setup_custom__validate:
    routing:
    - to: setup_custom__apply
    text:
      text: 'Validate inputs. In dry-run mode, do not call external APIs.

        Live mode may validate credentials with provider APIs when host-gated.

        '
  setup_custom__apply:
    routing:
    - to: setup_custom__summary
    text:
      text: "Apply changes.\nDry-run must return a deterministic ProvisionPlan and\
        \ perform no network calls.\n\nProvisionPlan (JSON):\n{\n  \"config_patch\"\
        : {\"public_base_url\": \"<value>\", \"default_channel\"\
        : \"<value>\", \"team_id\": \"<value>\"},\n  \"secrets_patch\": { \"set\"\
        : {\"SLACK_BOT_TOKEN\": \"<redacted>\", \"SLACK_SIGNING_SECRET\": \"<redacted>\"\
        }, \"delete\": [] },\n  \"webhook_ops\": [{\"op\": \"register\", \"url\":\
        \ \"<public_base_url>/webhooks/slack\"}],\n  \"subscription_ops\": [],\n \
        \ \"oauth_ops\": [{\"op\": \"authorize\"}]\n}\n"
  setup_custom__summary:
    routing: out
    text:
      text: messaging.slack.api setup_custom complete.
